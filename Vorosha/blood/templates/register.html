{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="vh-100 d-flex justify-content-center align-items-center" style="margin-top: 5%">
  <div class="card shadow" style="width: 400px;">
    <div class="card-body" style="background-color: #f8f9fa; padding: 30px;">
      <h4 class="card-title text-center mb-4">Sign Up</h4>
      <form method="POST" action="{% url 'register' %}">
          {% csrf_token %}
          
          <!-- Username Field -->
          <div class="mb-3">
              <label for="id_username" class="form-label">Username</label>
              <input type="text" name="username" class="form-control {% if form.username.errors %}is-invalid{% endif %}" 
                     id="id_username" placeholder="Enter your username" 
                     value="{% if form.username.value %}{{ form.username.value }}{% endif %}" required>
              {% if form.username.errors %}
              <div class="invalid-feedback">
                  {% for error in form.username.errors %}
                      {{ error }}
                  {% endfor %}
              </div>
              {% endif %}
          </div>

          <!-- Email Field -->
          <div class="mb-3">
              <label for="id_email" class="form-label">Email</label>
              <input type="email" name="email" class="form-control {% if form.email.errors %}is-invalid{% endif %}" 
                     id="id_email" placeholder="Enter your email" 
                     value="{% if form.email.value %}{{ form.email.value }}{% endif %}" required>
              {% if form.email.errors %}
              <div class="invalid-feedback">
                  {% for error in form.email.errors %}
                      {{ error }}
                  {% endfor %}
              </div>
              {% endif %}
          </div>

          <!-- Blood Group Field -->
          <div class="mb-3">
              <label for="id_blood_group" class="form-label">Blood Group</label>
              <select name="blood_group" class="form-control {% if form.blood_group.errors %}is-invalid{% endif %}" 
                      id="id_blood_group" required>
                  <option value="">Select your blood group</option>
                  <option value="A+" {% if form.blood_group.value == 'A+' %}selected{% endif %}>A+</option>
                  <option value="A-" {% if form.blood_group.value == 'A-' %}selected{% endif %}>A-</option>
                  <option value="B+" {% if form.blood_group.value == 'B+' %}selected{% endif %}>B+</option>
                  <option value="B-" {% if form.blood_group.value == 'B-' %}selected{% endif %}>B-</option>
                  <option value="AB+" {% if form.blood_group.value == 'AB+' %}selected{% endif %}>AB+</option>
                  <option value="AB-" {% if form.blood_group.value == 'AB-' %}selected{% endif %}>AB-</option>
                  <option value="O+" {% if form.blood_group.value == 'O+' %}selected{% endif %}>O+</option>
                  <option value="O-" {% if form.blood_group.value == 'O-' %}selected{% endif %}>O-</option>
              </select>
              {% if form.blood_group.errors %}
              <div class="invalid-feedback">
                  {% for error in form.blood_group.errors %}
                      {{ error }}
                  {% endfor %}
              </div>
              {% endif %}
          </div>

          <!-- Date of Birth Field -->
          <div class="mb-3">
              <label for="id_date_of_birth" class="form-label">Date of Birth</label>
              <input type="date" name="date_of_birth" class="form-control {% if form.date_of_birth.errors %}is-invalid{% endif %}" 
                     id="id_date_of_birth" 
                     value="{% if form.date_of_birth.value %}{{ form.date_of_birth.value|date:'Y-m-d' }}{% endif %}" required>
              {% if form.date_of_birth.errors %}
              <div class="invalid-feedback">
                  {% for error in form.date_of_birth.errors %}
                      {{ error }}
                  {% endfor %}
              </div>
              {% endif %}
          </div>

          <!-- City Location Field -->
          <div class="mb-3">
              <label for="id_city_location" class="form-label">City Location</label>
              <input type="text" name="city_location" class="form-control {% if form.city_location.errors %}is-invalid{% endif %}" 
                     id="id_city_location" placeholder="Enter your city" 
                     value="{% if form.city_location.value %}{{ form.city_location.value }}{% endif %}" required>
              {% if form.city_location.errors %}
              <div class="invalid-feedback">
                  {% for error in form.city_location.errors %}
                      {{ error }}
                  {% endfor %}
              </div>
              {% endif %}
          </div>

          <!-- Password Field -->
          <div class="mb-3">
              <label for="id_password1" class="form-label">Password</label>
              <input type="password" name="password1" class="form-control {% if form.password1.errors %}is-invalid{% endif %}" 
                     id="id_password1" placeholder="Enter your password" required>
              {% if form.password1.errors %}
              <div class="invalid-feedback">
                  {% for error in form.password1.errors %}
                      {{ error }}
                  {% endfor %}
              </div>
              {% endif %}
              <small class="form-text text-muted">At least 8 characters with numbers and letters</small>
          </div>

          <!-- Password Confirmation Field -->
          <div class="mb-3">
              <label for="id_password2" class="form-label">Confirm Password</label>
              <input type="password" name="password2" class="form-control {% if form.password2.errors %}is-invalid{% endif %}" 
                     id="id_password2" placeholder="Confirm your password" required>
              {% if form.password2.errors %}
              <div class="invalid-feedback">
                  {% for error in form.password2.errors %}
                      {{ error }}
                  {% endfor %}
              </div>
              {% endif %}
          </div>

          <button type="submit" class="btn btn-danger w-100">Sign Up</button>
      </form>
      <div class="text-center mt-3">
          <a href="{% url 'login' %}" class="text-decoration-none">Already have an account? Login</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}